<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <link rel="manifest" href="manifest.json">
    <title>WordZen Arena</title>
    <style>
        :root { --neon-green: #00ff88; --neon-red: #ff3e3e; --neon-gold: #ffd700; --neon-blue: #00d4ff; --neon-purple: #a855f7; }
        body { 
            margin: 0; background: #000; color: white; overflow: hidden;
            font-family: 'Segoe UI', Roboto, sans-serif; display: flex; flex-direction: column; align-items: center; 
            height: 100vh; width: 100%; position: fixed;
        }

        /* SPLASH ANÄ°MASYONU */
        #splash { 
            position: fixed; inset: 0; background: #000; z-index: 9999; 
            display: flex; justify-content: center; align-items: center; 
        }
        .s-logo { 
            font-size: 3rem; font-weight: 200; color: #fff; letter-spacing: 15px; 
            animation: zenFade 4s ease-in-out forwards; 
        }
        @keyframes zenFade {
            0% { opacity: 0; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(1.1); }
        }

        /* TÃœM EKRANLAR BAÅžTA GÄ°ZLÄ° */
        #name-screen, #main-menu, #arena-lobby, #game-screen { 
            position: fixed; inset: 0; background: #000; z-index: 1000; 
            display: none; flex-direction: column; align-items: center; justify-content: center; gap: 20px; 
        }

        .menu-btn { 
            width: 260px; padding: 18px; border-radius: 15px; font-weight: bold; cursor: pointer; 
            text-align: center; border: 2px solid transparent; background: rgba(255,255,255,0.03); color: white; 
            transition: 0.3s;
        }
        #btn-solo { border-color: var(--neon-green); color: var(--neon-green); }
        #btn-arena { border-color: var(--neon-blue); color: var(--neon-blue); }

        /* ARENA TASARIMI */
        .score-board { display: flex; gap: 40px; font-size: 1.1rem; color: var(--neon-gold); margin-bottom: 20px; }
        #timer-neon { font-size: 2.5rem; color: var(--neon-red); text-shadow: 0 0 15px var(--neon-red); }
        
        .letter-box { 
            width: 35px; height: 50px; border: 1px solid rgba(255,255,255,0.2); 
            border-radius: 8px; display: flex; align-items: center; justify-content: center; 
            font-size: 1.5rem; font-weight: bold; 
        }
        .active-box { border-color: var(--neon-green); box-shadow: 0 0 10px var(--neon-green); }

        #offline-overlay { 
            position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 10000; 
            display: none; flex-direction: column; align-items: center; justify-content: center; 
        }
    </style>
</head>
<body>

<div id="splash"><div class="s-logo">WordZen</div></div>

<div id="name-screen">
    <h2 style="color:var(--neon-blue); letter-spacing: 5px;">Ä°SMÄ°NÄ° SEÃ‡</h2>
    <input type="text" id="user-name-input" placeholder="KullanÄ±cÄ± AdÄ±" maxlength="12" 
           style="background:transparent; border:none; border-bottom:2px solid var(--neon-blue); color:white; font-size:1.5rem; text-align:center; outline:none; width: 80%;">
    <button class="menu-btn" style="border-color:var(--neon-green); margin-top:20px;" onclick="saveName()">OYUNA GÄ°R</button>
</div>

<div id="main-menu">
    <div style="font-size:2.5rem; color:var(--neon-blue); margin-bottom:40px; letter-spacing:10px;">WordZen</div>
    <div class="menu-btn" id="btn-solo" onclick="startSolo()">SOLO MOD</div>
    <div class="menu-btn" id="btn-arena" onclick="openArena()">1v1 ARENA</div>
</div>

<div id="arena-lobby">
    <div style="border:1px solid var(--neon-blue); padding:30px; border-radius:20px; text-align:center; width:80%;">
        <h2 style="color:var(--neon-blue)">ARENA LOBÄ°SÄ°</h2>
        <div id="lobby-controls">
            <button class="menu-btn" style="border-color:var(--neon-gold); margin-bottom:10px;" onclick="createRoom()">ODA KUR</button>
            <p>veya</p>
            <input type="number" id="room-id-input" placeholder="ODA KODU" style="background:transparent; border:none; border-bottom:1px solid #fff; color:#fff; font-size:1.5rem; width:120px; text-align:center; margin-bottom:20px;">
            <button class="menu-btn" style="border-color:var(--neon-blue);" onclick="joinRoom()">ODAYA KATIL</button>
        </div>
        <div id="room-active" style="display:none;">
            <p style="font-size:1rem;">ODA KODUNUZ:</p>
            <h1 id="code-display" style="font-size:3rem; margin:10px 0;">----</h1>
            <p id="wait-msg" style="color:var(--neon-green);">Rakip bekleniyor... (1/2)</p>
            <button class="menu-btn" style="background:var(--neon-red); border:none; margin-top:20px;" onclick="startMatch()">SAVAÅžI BAÅžLAT!</button>
        </div>
        <button onclick="exitLobby()" style="margin-top:30px; background:none; border:none; color:#555; text-decoration:underline;">ODAYI KAPAT VE Ã‡IK</button>
    </div>
</div>

<div id="game-screen">
    <div id="arena-header" style="display:none; flex-direction:column; align-items:center;">
        <div class="score-board">
            <div><span id="p1-label">SEN</span>: <span id="p1-score">0</span></div>
            <div><span id="p2-label">RAKÄ°P</span>: <span id="p2-score">0</span></div>
        </div>
        <div id="timer-neon">60</div>
    </div>
    <div id="solo-header" style="color:var(--neon-blue); letter-spacing:5px; margin-bottom:20px;">SOLO MOD</div>
    
    <div id="word-container" style="display:flex; gap:8px; margin-bottom:30px;"></div>
    <div id="round-txt" style="color:#666; font-size:0.8rem;">SORU: 1/10</div>
</div>

<div id="offline-overlay">
    <div style="font-size:4rem;">ðŸ“¶<span style="color:var(--neon-red); font-weight:bold;">!</span></div>
    <h2 style="color:var(--neon-red)">BAÄžLANTINIZ KESÄ°LDÄ°</h2>
    <p>Ä°nternet olmadan Arena oynanamaz.</p>
</div>

<script>
    let userName = localStorage.getItem('wz_name') || "";
    let coins = parseInt(localStorage.getItem('wz_coins')) || 0;
    let roomCode = null;

    // AÃ‡ILIÅž AKIÅžI
    window.onload = () => {
        setTimeout(() => {
            document.getElementById('splash').style.display = 'none';
            if(!userName) {
                document.getElementById('name-screen').style.display = 'flex';
            } else {
                showMainMenu();
            }
        }, 4000);
    };

    function saveName() {
        const input = document.getElementById('user-name-input').value;
        if(input.length >= 2) {
            userName = input.toUpperCase();
            localStorage.setItem('wz_name', userName);
            document.getElementById('name-screen').style.display = 'none';
            showMainMenu();
        }
    }

    function showMainMenu() {
        document.getElementById('main-menu').style.display = 'flex';
        document.getElementById('p1-label').innerText = userName;
    }

    function openArena() {
        if(!navigator.onLine) { document.getElementById('offline-overlay').style.display='flex'; return; }
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById('arena-lobby').style.display = 'flex';
    }

    function createRoom() {
        roomCode = Math.floor(1000 + Math.random() * 9000);
        document.getElementById('code-display').innerText = roomCode;
        document.getElementById('lobby-controls').style.display = 'none';
        document.getElementById('room-active').style.display = 'block';
    }

    function exitLobby() {
        roomCode = null;
        document.getElementById('room-active').style.display = 'none';
        document.getElementById('lobby-controls').style.display = 'block';
        document.getElementById('arena-lobby').style.display = 'none';
        showMainMenu();
    }

    function startMatch() {
        document.getElementById('arena-lobby').style.display = 'none';
        document.getElementById('game-screen').style.display = 'flex';
        document.getElementById('arena-header').style.display = 'flex';
        document.getElementById('solo-header').style.display = 'none';
        // 10 soru mantÄ±ÄŸÄ± ve timer burada baÅŸlar...
    }

    function startSolo() {
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById('game-screen').style.display = 'flex';
        document.getElementById('arena-header').style.display = 'none';
        document.getElementById('solo-header').style.display = 'block';
        // Solo oyun baÅŸlatma...
    }

    // Ä°NTERNET KONTROLÃœ
    window.addEventListener('offline', () => { 
        if(document.getElementById('arena-lobby').style.display === 'flex' || 
           document.getElementById('arena-header').style.display === 'flex') {
            document.getElementById('offline-overlay').style.display = 'flex'; 
        }
    });
    window.addEventListener('online', () => { document.getElementById('offline-overlay').style.display = 'none'; });
</script>

</body>
</html>
